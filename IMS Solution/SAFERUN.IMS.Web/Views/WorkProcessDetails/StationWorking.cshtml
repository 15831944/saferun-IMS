@model IEnumerable<SAFERUN.IMS.Web.Models.StationWorkViewModel>

@{
    ViewBag.Title = "StationWorking";
    Layout = "~/Views/Shared/_TerminalLayoutPage.cshtml";
}

 

<nav class="navbar navbar-default">
    <ul class="nav navbar-nav">
        <li><a href="#">当前机台</a></li>
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> 选择机台 <span class="caret"></span></a>
            <ul class="dropdown-menu">
                @foreach (var item in ViewBag.Stations)
                {
                    <li><a href="#">@item.StationNo</a></li>
                }

            </ul>
        </li>

        <li><a href="#">状态</a></li>
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> 选择状态 <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="#">未开始</a></li>
                <li><a href="#">行进中</a></li>
                <li><a href="#">已完工</a></li>

            </ul>
        </li>

</ul>
     

</nav>

    <table class="table">
        <tr>
            <th>
                项目名称
            </th>
            <th>
                加工组件
            </th>
            <th>
                图纸编号
            </th>
            <th>
                额定工时
            </th>
            <th>
                开始时间
            </th>
            <th>
                结束时间
            </th>
            <th>
                实际工时
            </th>

        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.ProjectName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ComponentSKU)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.GraphSKU)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.StandardElapsedTime)
                </td>

                <td>
                    @if (item.Status == 0)
                    {
                        <a id="add_row" class="btn btn-success pull-left">开始</a>
                    }
                    else
                    {
                        @*@Html.DisplayFor(modelItem => item.StartingDateTime, "ShortDateTime")*@
                        if (item.StartingDateTime.HasValue)
                        {
                            @item.StartingDateTime.Value.ToString("HH:mm")
                        }
                    }
                </td>
                <td>
                    @if (item.Status < 2)
                    {
                        if (item.Status == 0)
                        {
                            <a id="add_row" disabled class="btn btn-danger pull-left">结束</a>
                        }
                        else
                        {
                            <a id="add_row" class="btn btn-danger pull-left">结束</a>
                        }
                    }
                    else
                    {
                        @*@Html.DisplayFor(modelItem => item.StartingDateTime, "ShortDateTime")*@
                        if (item.StartingDateTime.HasValue)
                        {
                            @item.StartingDateTime.Value.ToString("HH:mm")
                        }
                    }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ElapsedTime)
                </td>

            </tr>
        }

    </table>
    <script type="text/javascript">
        $(function () {

            $(".dropdown-menu li a").click(function () {
                var selText = $(this).text();
                console.log(selText);
                $(this).parents('.dropdown').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');
            });
        })
    </script>
